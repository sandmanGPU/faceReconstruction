{%extends 'base.html'%}
{%block title%}<h1>Image uploader</h1>{%endblock%}
{%block content%}
    <!-- Form for uploading an image -->
    <form method="POST" action="/" enctype="multipart/form-data">
        <input type="file" name="image">
        <input type="submit" value="Upload">
    </form>

    <!-- Display the uploaded image (if provided) -->
    {% if filename %}
        <h2>Uploaded Image</h2>
        <img src="{{ url_for('static', filename='uploads/' + filename) }}" alt="Uploaded Image" style="width: 512px">
        <form method="POST", action="/process_image/{{filename}}">
            <input type="submit" value="Process Image">
        </form>    
    {% endif %}
    <!-- {% if image_list|length>0 %}
    {%for crop in image_list%}
        <img src="{{ url_for('static', filename='results/' + crop) }}" alt="Uploaded Image" style="width: 256px">
    {%endfor%} -->
    {% endif %}
{%endblock%}

{%block carousel %}
{% if image_list|length>0 %}
<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
      {% for i in range(image_list|length) %}
          <li data-target="#carouselExampleIndicators" data-slide-to="{{ i }}" class="{{ 'active' if i == 0 else '' }}"></li>
      {% endfor %}
  </ol>
  <style>
    #carouselExampleIndicators {
      max-width: 500px; /* Adjust to your desired width */
      max-height: 500px; /* Adjust to your desired height */
    }
  </style>
  <style>
    /* Custom styles for the carousel indicators */
    .carousel-indicators {
      /* Adjust the size of the indicators */
      font-size: 10px;
    }
  
    /* Active indicator style */
    .carousel-indicators .active {
      background-color: #007BFF; /* Set the background color for the active indicator */
      border-color: #007BFF; /* Set the border color for the active indicator */
    }
  
    /* Inactive indicator style */
    .carousel-indicators li {
      background-color: #ccc; /* Set the background color for inactive indicators */
      border: 1px solid #888; /* Set the border style for inactive indicators */
    }
  </style>
  <div class="carousel-inner">
      {% for i in range(image_list|length) %}
          <div class="carousel-item {{ 'active' if i == 0 else '' }}">
            <img class="d-block" src="{{ url_for('static', filename='results/' + image_list[i]) }}" alt="Slide {{ i + 1 }}" style="height: 256px;">
          
          </div>
      {% endfor %}
  </div>
 <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
{%endif%}
{%endblock%}

{%block model_viewer%}

{%if image_list|length>0%}
<p>3D model viewer</p>
<div class="container">
  <div class="viewport" id="model-container"></div>
  <button id="prev-button">Prev</button>
  <button id="next-button">Next</button>
  <div id="filenames" style="display: none;">{{ obj_list | tojson | safe }}</div>
</div>
<script type="module" src="{{url_for('static', filename='main.js')}}"></script>

{%else%}
<p>No 3D models found</p>
{%endif%}
{%endblock%}